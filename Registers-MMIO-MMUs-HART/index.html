<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="twitter:description" content="A journal/blog maintained by Mees van Dijk"/><meta data-react-helmet="true" name="twitter:title" content="Registers, MMIO, MMUs and a HART"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="A journal/blog maintained by Mees van Dijk"/><meta data-react-helmet="true" property="og:title" content="Registers, MMIO, MMUs and a HART"/><meta data-react-helmet="true" name="description" content="A journal/blog maintained by Mees van Dijk"/><meta name="theme-color" content="#ff9f1c"/><meta name="generator" content="Gatsby 4.12.1"/><style data-href="/styles.1c3305485ba58f488c4d.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:100;src:local("IBM Plex Mono Thin "),local("IBM Plex Mono-Thin"),url(/static/ibm-plex-mono-latin-100-fbbe6640722e48ae296f72a775d90628.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-100-a2e072f282fe4cf405c7676541c67952.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:100;src:local("IBM Plex Mono Thin italic"),local("IBM Plex Mono-Thinitalic"),url(/static/ibm-plex-mono-latin-100italic-662e3ed0e29440f91422301ffd2119b8.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-100italic-3ca3ccea38e6f12e2a4b101b5db0e3e4.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:200;src:local("IBM Plex Mono Extra Light "),local("IBM Plex Mono-Extra Light"),url(/static/ibm-plex-mono-latin-200-0859d90e23a506d37bc8e46a8e794d0b.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-200-b6f1876cbf1a47cdd81a0a04030b3d34.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:200;src:local("IBM Plex Mono Extra Light italic"),local("IBM Plex Mono-Extra Lightitalic"),url(/static/ibm-plex-mono-latin-200italic-513326fd747f010b111a6bebba664b0b.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-200italic-9ef5c45641e7b2d65fb707047b666217.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:300;src:local("IBM Plex Mono Light "),local("IBM Plex Mono-Light"),url(/static/ibm-plex-mono-latin-300-e1de2ee312e829aaa42549b0801d5de1.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-300-bdbb6d895bbfd517ce5b8592507b7971.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:300;src:local("IBM Plex Mono Light italic"),local("IBM Plex Mono-Lightitalic"),url(/static/ibm-plex-mono-latin-300italic-fa8e5cc3b4949290cbda7c5fdb6f32c3.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-300italic-ea73e6fc66cd243f329b76d86b02cb53.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:400;src:local("IBM Plex Mono Regular "),local("IBM Plex Mono-Regular"),url(/static/ibm-plex-mono-latin-400-c708fd4f02694c48059ff599eaab6a33.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-400-12ead37cece64fd8fab042e14a60e810.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:400;src:local("IBM Plex Mono Regular italic"),local("IBM Plex Mono-Regularitalic"),url(/static/ibm-plex-mono-latin-400italic-1c4b3c62369a45fdc78f4146f9b16417.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-400italic-855a333e76f724107ca3595047d95081.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:500;src:local("IBM Plex Mono Medium "),local("IBM Plex Mono-Medium"),url(/static/ibm-plex-mono-latin-500-1eeaa99b03ad926d0cd60abcc4ffb901.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-500-67acf1407a576e8a883204b7300bb3e7.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:500;src:local("IBM Plex Mono Medium italic"),local("IBM Plex Mono-Mediumitalic"),url(/static/ibm-plex-mono-latin-500italic-2f3ff4c87e1d23f6a7be79e61607dbc7.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-500italic-d6fc0761cf07faa1a728f276a50fcb22.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:600;src:local("IBM Plex Mono SemiBold "),local("IBM Plex Mono-SemiBold"),url(/static/ibm-plex-mono-latin-600-85af07669a5689b514c9f2d55567dd77.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-600-384c2ed41ea602a5cb62c6eb1b08fc94.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:600;src:local("IBM Plex Mono SemiBold italic"),local("IBM Plex Mono-SemiBolditalic"),url(/static/ibm-plex-mono-latin-600italic-5c6c129c03368311f84da4f3e1ddcde5.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-600italic-aec0bfac06017e6ab33c3b50b901434f.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:normal;font-weight:700;src:local("IBM Plex Mono Bold "),local("IBM Plex Mono-Bold"),url(/static/ibm-plex-mono-latin-700-41607f472bb026b2f9fd187572b37006.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-700-af540dcfdbb0cb8d810eaab049dffdeb.woff) format("woff")}@font-face{font-display:swap;font-family:IBM Plex Mono;font-style:italic;font-weight:700;src:local("IBM Plex Mono Bold italic"),local("IBM Plex Mono-Bolditalic"),url(/static/ibm-plex-mono-latin-700italic-c8c965ac02747e28eebc04ffa3624a47.woff2) format("woff2"),url(/static/ibm-plex-mono-latin-700italic-06ddc6fbb9d80518381d085dfad24a0a.woff) format("woff")}body{background-color:#fff6f4}.flex-center,body{align-items:center;display:flex;flex-direction:row;justify-content:center}a,a:visited{color:inherit;outline:none}a.simple,a.simple:visited{text-decoration:none}a:hover{text-decoration:underline}*{font-family:IBM Plex Mono,Courier New,Courier,monospace}div{overflow:auto}.blog-post-module--title--WafZ4{color:#b95204;margin:0}.blog-post-module--meta--XwIyg{margin:20px 0}.blog-post-module--meta--XwIyg h1,.blog-post-module--meta--XwIyg h2,.blog-post-module--meta--XwIyg h3,.blog-post-module--meta--XwIyg h4,.blog-post-module--meta--XwIyg h5,.blog-post-module--meta--XwIyg h6{background-color:#2660a4;color:#dbf9f4;display:inline-block;margin:2px}.blog-post-module--date--Ytodg{margin-bottom:3px}.blog-post-module--content--kVcW\+ p:first-child{margin-top:5px}.blog-post-module--content--kVcW\+ a{color:#2660a4;font-weight:600}.blog-post-module--content--kVcW\+ a:hover{background-color:#2660a4;color:#dbf9f4}.header-module--header--eORMa{color:#2660a4}.header-module--no-underline--wZud8,.header-module--no-underline--wZud8:hover{text-decoration:none}.footer-module--footer--A9iq7{margin-top:30px}.layout-module--main--GXHFS{width:min(960px,90vw)}.entryList-module--list--mr3e2{list-style:none;padding:0}.entryList-module--item--aiwWO{color:#b95204;margin:10px 0}.entryList-module--item--aiwWO a{color:inherit;font-weight:700}</style><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="icon" href="/favicon-32x32.png?v=78050e45b7514f053281b7f64f7a35ea" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=78050e45b7514f053281b7f64f7a35ea"/><link rel="alternate" type="application/rss+xml" title="Journal" href="/rss.xml"/><title data-react-helmet="true">Registers, MMIO, MMUs and a HART | Journal</title><link as="script" rel="preload" href="/webpack-runtime-60fbceb4a93c3927f0b5.js"/><link as="script" rel="preload" href="/framework-1e897580c160af201ebd.js"/><link as="script" rel="preload" href="/app-a3ff2921a9f0b15ca3cb.js"/><link as="script" rel="preload" href="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-6dc583cc893b6d1c067b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-369da5c3a73715ac8644.js"/><link as="fetch" rel="preload" href="/page-data/Registers-MMIO-MMUs-HART/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2667034088.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/671806358.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="header-module--header--eORMa"><h1><a class="simple " href="/">Journal</a></h1></header><main class="layout-module--main--GXHFS"><h2 class="blog-post-module--title--WafZ4">Registers, MMIO, MMUs and a HART</h2><div class="blog-post-module--meta--XwIyg"><h4>Home, Groningen</h4><br/><h4 class="blog-post-module--date--Ytodg">Wednesday, April 20th 2022</h4><br/><h5>10:04 AM</h5></div><div class="blog-post-module--content--kVcW+"><p>Well first of all, it’s been a while and I very much wasn’t sure whether I would
ever write another entry. But I’ve found something very interesting on Reddit.</p>
<p>Yesterday morning I woke up in the house of one of my friend’s parents. We had
had a party the night before and slept over, since it’s far away from where I
live. As I was scrolling Reddit early in the morning I came across a post
mentioning
<a href="https://osblog.stephenmarz.com/index.html">someone’s blog about building an OS in Rust for the RISC-V architecture</a>.
I’ve been playing with my Arduino a little bit lately and I had also already
come across a project that simplifies Rust development on Arduino. I learned to
program the Arduino in C (not the official Arduino C++ suite) in college two
years ago so I already knew a bit about bare metal programming. RISC-V was no
Arduino however, this was a much more complicated instruction set architecture
(ISA) than the one that my Arduino runs. My Arduino, which is an Uno Rev3 runs
on an Atmega328p processor. That chip contains the flash (for storing the
program), eeprom (a sort of non-volatile RAM) and it’s SRAM (actual RAM) all on
the same chip as it’s processor core. This is what’s known as a
<a href="https://en.wikipedia.org/wiki/System_on_a_chip">System on a Chip (SoC)</a> and it
combines some parts of a computer all in one chip. The Arduino actually also has
a whole other SoC, an Atmega16u2, as a co-processor which acts as a converter
between the serial interface and USB, basically it handles all USB things.</p>
<p>RISC-V is a lot more complicated than this, while also being a good stepping
stone to keep learning more about hardware. RISC-V uses, like Atmel’s AVR, a
<a href="https://en.wikipedia.org/wiki/Reduced_instruction_set_computer">Reduced Instruction Set Computing</a>
ISA. Which means that instead of thousands of instructions for the CPU, it has a
couple hundred. RISC-V supports a lot more than AVR though. To me, as a relative
noob (who hasn’t even completed that blog series yet), it seems one of the
important differences between the two is the fact that RISC-V has an
unprivileged mode. That means that the CPU can block or alter some of it’s
behaviour when foreign programs are running. Exactly like how some program I
download on my laptop can’t just go and modify my entire computer and hack me.
Granted you can get hacked, but a program can’t <em>just</em> do it. The Arduino
doesn’t have that and that’s why writing an OS on an Arduino isn’t as
spectacular. Because you need to trust all the software you put on it with the
whole machine, you might as well write specialised software that skips having a
kernel and OS at all.</p>
<p>All in all I’m learning a lot about the RISC-V architecture and how kernel and
OS development works. I’m planning to practice some of it too. I’ll probably do
it on my Arduino, even though it isn’t really useful (as described above). I’ve
been interested in systems development for some time but the blog post series is
a really good kick start to learn a lot more.<br>
If I do end up writing an OS for the Arduino, I’ll write another entry about it.</p>
<p>For a short explanation of the title, MMIO is memory-mapped IO, the MMU is the
memory management unit, which protects the RAM from unauthorized programs and a
HART is a hardware thread AKA processor core.</p>
<h2>More interesting links</h2>
<p>I’ve been researching a lot of stuff related to these topics. If you’re
interested, click some of the links!</p>
<ul>
<li><a href="https://osblog.stephenmarz.com/index.html">The blog again</a></li>
<li><a href="https://www.Arduino.cc/">Arduino</a></li>
<li><a href="https://github.com/rust-embedded/awesome-embedded-rust">Awesome Embedded Rust</a></li>
<li><a href="https://riscv.org/technical/specifications/">RISC-V technical specification</a></li>
</ul></div></main><footer class="footer-module--footer--A9iq7"><span>Made by <!-- --><a href="https://mees.io">Mees van Dijk</a> <!-- -->&lt;<!-- -->mees@mees.io<!-- -->&gt;<!-- --></span></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FL62XJHBPJ"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FL62XJHBPJ', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/Registers-MMIO-MMUs-HART/";window.___webpackCompilationHash="783c2928a2abbc8c51f4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-df79ecb4312566711eb0.js"],"app":["/app-a3ff2921a9f0b15ca3cb.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-4609ba0d724e14382880.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d1a762279d6908a58385.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d966896a371a7bcef2a4.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-369da5c3a73715ac8644.js"]};/*]]>*/</script><script src="/polyfill-df79ecb4312566711eb0.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-369da5c3a73715ac8644.js" async=""></script><script src="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-6dc583cc893b6d1c067b.js" async=""></script><script src="/app-a3ff2921a9f0b15ca3cb.js" async=""></script><script src="/framework-1e897580c160af201ebd.js" async=""></script><script src="/webpack-runtime-60fbceb4a93c3927f0b5.js" async=""></script></body></html>